<div class="p-6 sm:ml-64 mt-14 mx-auto">
  <form class="max-w-4xl mx-auto mt-10 p-6 bg-white rounded-lg shadow-md space-y-6"
    #form="ngForm" 
    (ngSubmit)="save(form)" 
    novalidate 
  >
    <h2 class="text-2xl font-bold text-gray-800">
      {{ isEditing ? 'Editar Exerc√≠cio' : 'Cadastrar Exerc√≠cio' }}
    </h2>

    <!-- T√≠tulo -->
    <div>
      <label for="titulo" class="block mb-2 text-sm font-medium text-gray-700">
        T√≠tulo do Exerc√≠cio
      </label>
      <input
        type="text"
        id="titulo"
        name="title"
        [(ngModel)]="exercise.title"
        required
        class="block w-full p-2 border border-gray-300 rounded-lg"
        placeholder="Digite o t√≠tulo do exerc√≠cio"
      >
      <p *ngIf="form.submitted && !exercise.title.trim()" class="text-red-500 text-sm">
        Este campo √© obrigat√≥rio.
      </p>
    </div>

    <div>
      <label for="dialect" class="block mb-2 text-sm font-medium text-gray-700">
        Dialeto do banco
      </label>
      <select
        id="tipo"
        name="dialect"
        required
        [(ngModel)]="exercise.dialect"
        class="block w-full p-2 border border-gray-300 rounded-lg"
      >
        <option value="" disabled selected>Selecione um tipo de dialeto</option>
        <option *ngFor="let type of dialectTypes" [value]="type">{{ type }}</option>
      </select>
      <p *ngIf="form.submitted && !exercise.type" class="text-red-500 text-sm">
        Este campo √© obrigat√≥rio.
      </p>
    </div>

    <!-- Tipo do exerc√≠cio -->
    <div>
      <label for="type" class="block mb-2 text-sm font-medium text-gray-700">
        Tipo de comando SQL
      </label>
      <select
        id="tipo"
        name="type"
        required
        [(ngModel)]="exercise.type"
        class="block w-full p-2 border border-gray-300 rounded-lg"
      >
        <option value="" disabled selected>Selecione um tipo</option>
        <option *ngFor="let tipo of tiposSQL" [value]="tipo">{{ tipo }}</option>
      </select>
      <p *ngIf="form.submitted && !exercise.dialect" class="text-red-500 text-sm">
        Este campo √© obrigat√≥rio.
      </p>
    </div>

    <div>
      <label for="tableName" class="block mb-2 text-sm font-medium text-gray-700">
        Tabela Referente
      </label>
      <select
        id="tipo"
        name="tableName"
        required
        [(ngModel)]="exercise.tableName"
        class="block w-full p-2 border border-gray-300 rounded-lg"
      >
        <option value="" disabled selected>Selecione uma tabela</option>
        <option *ngFor="let table of tableNames" [value]="table">{{ table }}</option>
      </select>
      <p *ngIf="form.submitted && !exercise.tableName" class="text-red-500 text-sm">
        Este campo √© obrigat√≥rio.
      </p>
    </div>

    <!-- Descri√ß√£o -->
    <div>
      <label for="descricao" class="block mb-2 text-sm font-medium text-gray-700">
        Descri√ß√£o
      </label>
      <textarea
        id="descricao"
        name="description"
        required
        [(ngModel)]="exercise.description"
        class="w-full p-2 border rounded-lg"
        rows="4"
      ></textarea>
      <p *ngIf="form.submitted && !exercise.description.trim()" class="text-red-500 text-sm">
        Este campo √© obrigat√≥rio.
      </p>
    </div>

    <!-- Checkboxes -->
    <div class="flex flex-col gap-2">
      <!-- <label class="flex items-center space-x-2">
        <input type="checkbox" [(ngModel)]="exercise.sort" name="sort" class="rounded">
        <span class="text-sm text-gray-700">ORDER BY ser√° relevante</span>
      </label> -->
      <label class="flex items-center space-x-2">
        <input type="checkbox" [(ngModel)]="exercise.public" name="public" class="rounded">
        <span class="text-sm text-gray-700">Exerc√≠cio ser√° p√∫blico</span>
      </label>
    </div>

    <!-- Upload de imagem -->
    <!-- <div>
      <label for="imagem" class="block mb-2 text-sm font-medium text-gray-700">
        Imagem (opcional)
      </label>
      <input
        type="file"
        (change)="onImageUpload($event)"
        class="block w-full text-sm text-gray-700 border rounded-lg"
      >
      <div *ngIf="exercise.image" class="mt-2 text-sm text-gray-600">
        Imagem selecionada: <strong>{{ exercise.image }}</strong>
      </div>
    </div> -->

    <!-- üî∏ Resposta correta -->
    <div>
      <label for="resposta" class="block mb-2 text-sm font-medium text-gray-700">
        Resposta correta (query SQL que ser√° comparado)
      </label>
      <input
        type="text"
        id="resposta"
        name="answer"
        [(ngModel)]="exercise.answerProfessor"
        required
        class="block w-full p-2 border rounded-lg"
        placeholder="Digite a resposta correta (SQL)"
      >
      <p *ngIf="form.submitted && !exercise.answerProfessor" class="text-red-500 text-sm">
        Este campo √© obrigat√≥rio.
      </p>
    </div>

    <div class="flex items-center justify-end gap-4">
      <button class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"
        type="button"
        (click)="back()"
      >
        Voltar
      </button>
      <button class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
        type="submit" 
      >
        {{ isEditing ? 'Salvar Altera√ß√µes' : 'Salvar Exerc√≠cio' }}
      </button>
    </div>
  </form>
</div>
